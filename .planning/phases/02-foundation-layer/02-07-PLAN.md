---
phase: 02-foundation-layer
plan: 07
type: execute
wave: 2
depends_on: ["02-01"]
files_modified:
  - src/config/types.ts -> .js (barrel)
  - src/config/types.agent-defaults.ts -> .js
  - src/config/types.agents.ts -> .js
  - src/config/types.approvals.ts -> .js
  - src/config/types.auth.ts -> .js
  - src/config/types.base.ts -> .js
  - src/config/types.browser.ts -> .js
  - src/config/types.channels.ts -> .js
  - src/config/types.openclaw.ts -> .js
  - src/config/types.cron.ts -> .js
  - src/config/types.discord.ts -> .js
  - src/config/types.feishu.ts -> .js
  - src/config/types.googlechat.ts -> .js
  - src/config/types.gateway.ts -> .js
  - src/config/types.hooks.ts -> .js
  - src/config/types.imessage.ts -> .js
  - src/config/types.messages.ts -> .js
  - src/config/types.models.ts -> .js
  - src/config/types.node-host.ts -> .js
  - src/config/types.msteams.ts -> .js
  - src/config/types.plugins.ts -> .js
  - src/config/types.queue.ts -> .js
  - src/config/types.sandbox.ts -> .js
  - src/config/types.signal.ts -> .js
  - src/config/types.skills.ts -> .js
  - src/config/types.slack.ts -> .js
  - src/config/types.telegram.ts -> .js
  - src/config/types.tts.ts -> .js
  - src/config/types.tools.ts -> .js
  - src/config/types.whatsapp.ts -> .js
  - src/config/types.memory.ts -> .js
  - src/config/zod-schema.ts -> .js (barrel)
  - src/config/zod-schema.agent-defaults.ts -> .js
  - src/config/zod-schema.agent-runtime.ts -> .js
  - src/config/zod-schema.agents.ts -> .js
  - src/config/zod-schema.approvals.ts -> .js
  - src/config/zod-schema.channels.ts -> .js
  - src/config/zod-schema.core.ts -> .js
  - src/config/zod-schema.hooks.ts -> .js
  - src/config/zod-schema.providers-core.ts -> .js
  - src/config/zod-schema.providers-whatsapp.ts -> .js
  - src/config/zod-schema.providers.ts -> .js
  - src/config/zod-schema.session.ts -> .js
autonomous: true

must_haves:
  truths:
    - "All 31 config type files (types.ts barrel + 30 types.*.ts) are JavaScript with JSDoc typedefs"
    - "All 12 zod schema files are JavaScript"
    - "The types.ts barrel re-exports work from JSDoc-only files"
    - "Zod schema files preserve all runtime validation logic"
  artifacts:
    - path: "src/config/types.js"
      provides: "Config type barrel re-exports"
    - path: "src/config/types.auth.js"
      provides: "Auth config JSDoc typedefs"
      contains: "SECURITY:"
    - path: "src/config/zod-schema.js"
      provides: "Zod validation schema barrel"
    - path: "src/config/zod-schema.core.js"
      provides: "Core config validation schema"
  key_links:
    - from: "src/config/types.js"
      to: "src/config/types.auth.js"
      via: "barrel re-export"
      pattern: "export.*types.auth"
    - from: "src/config/zod-schema.js"
      to: "src/config/zod-schema.core.js"
      via: "barrel re-export"
      pattern: "export.*zod-schema.core"
---

<objective>
Convert all config type definition files and Zod validation schema files to JavaScript.

Purpose: The 30 types.*.ts files are type-only (export type definitions) that become JSDoc typedef files. The 12 zod-schema.*.ts files are already nearly pure JavaScript (Zod schemas are runtime code) and need minimal conversion. This batch is a natural unit because type files and schema files form the data model layer of the config system.

Output: ~43 files converted from .ts to .js. Type files become JSDoc-typedef-only documentation modules. Zod files get minimal type annotation stripping.
</objective>

<execution_context>
@/Users/slathrop/.claude/get-shit-done/workflows/execute-plan.md
@/Users/slathrop/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-foundation-layer/02-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Convert config type definition files to JSDoc typedef modules</name>
  <files>
    src/config/types.ts -> .js (barrel)
    src/config/types.agent-defaults.ts -> .js
    src/config/types.agents.ts -> .js
    src/config/types.approvals.ts -> .js
    src/config/types.auth.ts -> .js
    src/config/types.base.ts -> .js
    src/config/types.browser.ts -> .js
    src/config/types.channels.ts -> .js
    src/config/types.openclaw.ts -> .js
    src/config/types.cron.ts -> .js
    src/config/types.discord.ts -> .js
    src/config/types.feishu.ts -> .js
    src/config/types.googlechat.ts -> .js
    src/config/types.gateway.ts -> .js
    src/config/types.hooks.ts -> .js
    src/config/types.imessage.ts -> .js
    src/config/types.messages.ts -> .js
    src/config/types.models.ts -> .js
    src/config/types.node-host.ts -> .js
    src/config/types.msteams.ts -> .js
    src/config/types.plugins.ts -> .js
    src/config/types.queue.ts -> .js
    src/config/types.sandbox.ts -> .js
    src/config/types.signal.ts -> .js
    src/config/types.skills.ts -> .js
    src/config/types.slack.ts -> .js
    src/config/types.telegram.ts -> .js
    src/config/types.tts.ts -> .js
    src/config/types.tools.ts -> .js
    src/config/types.whatsapp.ts -> .js
    src/config/types.memory.ts -> .js
  </files>
  <action>
    These 30 files (plus the barrel) contain ONLY `export type` declarations. They have no runtime code.

    **Conversion pattern:**
    1. Convert every `export type Foo = { ... }` to a JSDoc `@typedef {object} Foo` block with `@property` annotations for each field. See 02-RESEARCH.md "Pattern 2: Type Export to JSDoc Typedef" and "Type-Only File Conversion Example" for the exact format.

    2. **Module-level comment (QUAL-04):** Add a top-of-file comment explaining what configuration domain this file defines types for.

    3. **Security comments (QUAL-05):** Add SECURITY comments on:
       - types.auth.ts: Auth profiles contain provider credentials
       - types.gateway.ts: Gateway config includes network binding and transport settings
       - types.approvals.ts: Approval settings gate code execution
       - types.sandbox.ts: Sandbox settings control isolation boundaries

    4. **The barrel file (types.ts):** Currently contains `export * from './types.xxx.js'` for all 30 files. Convert to .js with a module-level comment explaining it's a barrel re-export. The `export *` syntax will still work even though the target files only contain JSDoc typedefs -- `export *` from a file with no runtime exports is valid JavaScript (it's a no-op at runtime but preserves JSDoc documentation for tooling).

    5. Remove any `import type` statements. If a type references another type from a different types file, use JSDoc `{import('./types.auth.js').AuthProfileConfig}` syntax or simply use `{object}` if the cross-reference is complex.

    6. Run `eslint --fix` on each converted file.

    **Important:** After converting the first file (types.auth.ts as a test), verify that `export *` from the barrel works by checking no runtime errors. If ESLint complains about empty files, add `export {};` at the end of each typedef file to satisfy the linter.

    Process the barrel file LAST since it re-exports from all others.
  </action>
  <verify>
    - `find src/config/ -name 'types*.ts' | wc -l` returns 0
    - `npx eslint src/config/types.js src/config/types.auth.js src/config/types.gateway.js src/config/types.approvals.js` passes
    - `node -e "import('./src/config/types.js').then(() => console.log('barrel loads OK'))"` does not throw (or use a quick vitest check)
  </verify>
  <done>31 type files converted to JSDoc typedef modules. Barrel re-exports work. Security-relevant types have SECURITY comments.</done>
</task>

<task type="auto">
  <name>Task 2: Convert Zod schema files</name>
  <files>
    src/config/zod-schema.ts -> .js (barrel)
    src/config/zod-schema.agent-defaults.ts -> .js
    src/config/zod-schema.agent-runtime.ts -> .js
    src/config/zod-schema.agents.ts -> .js
    src/config/zod-schema.approvals.ts -> .js
    src/config/zod-schema.channels.ts -> .js
    src/config/zod-schema.core.ts -> .js
    src/config/zod-schema.hooks.ts -> .js
    src/config/zod-schema.providers-core.ts -> .js
    src/config/zod-schema.providers-whatsapp.ts -> .js
    src/config/zod-schema.providers.ts -> .js
    src/config/zod-schema.session.ts -> .js
  </files>
  <action>
    Zod schema files are already nearly pure JavaScript. The `z.object()`, `z.string()`, etc. calls are runtime code. Conversion is minimal:

    1. **Remove `import type` lines.** Zod files commonly have `import type { ... } from './types.xxx.js'` for type-level inference. Delete these entirely -- Zod schemas work without TypeScript type imports.

    2. **Strip any `as const` or type annotations** that may appear. Zod files rarely have these, but check each file.

    3. **Remove any `z.infer<typeof ...>` exports** -- these are TypeScript-only type inference. They produce no runtime value. Delete lines like `export type FooConfig = z.infer<typeof fooSchema>`. If these are the only exports besides the schema itself, that's fine -- the schema export is the runtime value.

    4. **Module-level comments (QUAL-04):** Add purpose comments explaining what configuration section each schema validates.

    5. **Run `eslint --fix`** on each converted file.

    6. Convert the barrel (zod-schema.ts) LAST.

    This task is fast because Zod schemas are already JavaScript in all but name.
  </action>
  <verify>
    - `find src/config/ -name 'zod-schema*.ts' | wc -l` returns 0
    - `npx eslint src/config/zod-schema.js src/config/zod-schema.core.js src/config/zod-schema.agents.js` passes
  </verify>
  <done>12 Zod schema files converted. Schemas are JavaScript with module comments. No type-only exports remain.</done>
</task>

</tasks>

<verification>
1. `find src/config/ -name 'types*.ts' -o -name 'zod-schema*.ts' | wc -l` returns 0
2. All type files contain JSDoc `@typedef` blocks
3. Zod schema files have no remaining TypeScript syntax
4. Barrel files (types.js, zod-schema.js) load without errors
5. ESLint passes on all converted files
</verification>

<success_criteria>
- 43 files converted from .ts to .js
- Type files are JSDoc typedef documentation modules
- Zod schema files preserve all runtime validation logic
- Security-relevant types (auth, approvals, sandbox, gateway) have SECURITY: comments
- ESLint reports no errors
</success_criteria>

<output>
After completion, create `.planning/phases/02-foundation-layer/02-07-SUMMARY.md`
</output>
