---
phase: 06-verification-and-parity
plan: 03
type: execute
wave: 2
depends_on: [06-01]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "All messaging channel implementations load and export correctly"
    - "Web UI builds and loads in browser"
    - "Extension packages load without import errors"
  artifacts: []
  key_links:
    - from: "src/channels/index.js"
      to: "src/telegram/index.js, src/discord/index.js, etc."
      via: "channel registry"
      pattern: "export.*from"
    - from: "ui/src/app.js"
      to: "ui/vite.config.js"
      via: "Vite build"
      pattern: "build"
---

<objective>
Verify all messaging channels, web UI, and extension packages function identically to the TypeScript version.

Purpose: Confirm all external interfaces (channels, UI, extensions) work after conversion.
Output: Documented verification that channels connect, UI renders, and extensions load.
</objective>

<execution_context>
@/Users/slathrop/.claude/get-shit-done/workflows/execute-plan.md
@/Users/slathrop/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-verification-and-parity/06-RESEARCH.md
@.planning/phases/06-verification-and-parity/06-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify channel implementations load correctly</name>
  <files>None (verification only)</files>
  <action>
Test that all channel implementations can be imported without errors:

**1. Create a channel import test script:**
```javascript
// test-channels.mjs
const channels = [
  '../src/telegram/index.js',
  '../src/discord/index.js',
  '../src/slack/index.js',
  '../src/signal/index.js',
  '../src/imessage/index.js',
  '../src/feishu/index.js',
  '../src/line/index.js',
  '../src/web/index.js',
  '../src/channels/index.js'
];

for (const channel of channels) {
  try {
    const mod = await import(channel);
    console.log(`✓ ${channel}: ${Object.keys(mod).length} exports`);
  } catch (err) {
    console.log(`✗ ${channel}: ${err.message}`);
  }
}
```

**2. Run the import test:**
```bash
node test-channels.mjs
```

**3. Test channel status command:**
```bash
pnpm openclaw channels status 2>&1 | head -40
```

The channels status should show each configured channel's state without import errors.
  </action>
  <verify>
All channel modules import without "module not found", "cannot access before initialization", or "is not defined" errors.
`pnpm openclaw channels status` displays channel states.
  </verify>
  <done>
- All 9 channel directories import successfully (Telegram, Discord, WhatsApp, Slack, Signal, iMessage, Feishu, LINE, Web)
- Channel exports are accessible
- Channels status command runs without errors
  </done>
</task>

<task type="auto">
  <name>Task 2: Verify web UI builds and loads</name>
  <files>None (verification only)</files>
  <action>
Test the web UI build and dev server:

**1. Build the UI:**
```bash
cd ui && pnpm build 2>&1 | tail -20
```
Build should complete without TypeScript or Vite errors.

**2. Check build output:**
```bash
ls -la ui/dist/ 2>/dev/null | head -10
```
Should contain index.html and bundled JS/CSS assets.

**3. Start dev server briefly to verify it runs:**
```bash
cd ui && timeout 10 pnpm dev 2>&1 || true
```
Dev server should start on port 5173 (or configured port).

**4. Return to project root:**
```bash
cd /opt/ws/gh/openclaw-simplified
```
  </action>
  <verify>
`pnpm build` in ui/ completes without errors.
ui/dist/ contains built assets.
Dev server starts without JavaScript errors.
  </verify>
  <done>
- UI builds successfully with Vite
- Build output exists in ui/dist/
- Dev server starts without errors
  </done>
</task>

<task type="auto">
  <name>Task 3: Verify extensions load correctly</name>
  <files>None (verification only)</files>
  <action>
Test that extension packages can be imported:

**1. List extension packages:**
```bash
ls -d extensions/*/package.json | head -15
```

**2. Test imports for key extensions:**
```javascript
// test-extensions.mjs
const extensions = [
  '../extensions/msteams/src/index.js',
  '../extensions/matrix/src/index.js',
  '../extensions/nostr/src/index.js',
  '../extensions/voice-call/src/index.js',
  '../extensions/zalo/src/index.js'
];

for (const ext of extensions) {
  try {
    const mod = await import(ext);
    console.log(`✓ ${ext}: ${Object.keys(mod).length} exports`);
  } catch (err) {
    console.log(`✗ ${ext}: ${err.message}`);
  }
}
```

**3. Run extension import test:**
```bash
node test-extensions.mjs 2>&1
```

**4. Run extension tests:**
```bash
pnpm vitest run --config vitest.extensions.config.js 2>&1 | tail -30
```
  </action>
  <verify>
Extension modules import without errors.
Extension tests pass (or fail for reasons unrelated to JS conversion).
  </verify>
  <done>
- Key extensions import successfully
- Extension tests run without import failures
- No conversion-related errors in extensions
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Channel implementations, web UI, and extensions verified for correct loading and basic functionality</what-built>
  <how-to-verify>
Review the verification results from Tasks 1-3:

1. **Channels**: All 9 channel implementations should import without errors
2. **Web UI**:
   - Build succeeds
   - If you want to verify visually: run `cd ui && pnpm dev` and open http://localhost:5173
   - The chat interface should render
3. **Extensions**: Key extensions should import without errors

**Optional live verification (if gateway and channels are configured):**
- Send a test message via configured channel
- Verify response routing works correctly
  </how-to-verify>
  <resume-signal>Type "approved" if channels, UI, and extensions work correctly, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
1. All channel modules import without errors
2. `pnpm openclaw channels status` runs without crash
3. Web UI builds successfully
4. Web UI dev server starts
5. Extension packages import without errors
6. Extension tests pass
</verification>

<success_criteria>
- All messaging channels load correctly (Telegram, Discord, WhatsApp, Slack, Signal, iMessage, Feishu, LINE)
- Web UI loads in browser, connects to gateway via WebSocket, and renders chat interface
- All extension packages load without errors
</success_criteria>

<output>
After completion, create `.planning/phases/06-verification-and-parity/06-03-SUMMARY.md`
</output>
